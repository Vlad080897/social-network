(this["webpackJsonpmy-react-project"]=this["webpackJsonpmy-react-project"]||[]).push([[4],{479:function(e,t,s){e.exports={massageInput:"dialogs_massageInput__3zlsy",massagePhoto:"dialogs_massagePhoto__uRYaw",scrollBtn:"dialogs_scrollBtn__3uQ5l"}},480:function(e,t,s){"use strict";s.r(t),s.d(t,"Dialogs",(function(){return f}));var a=s(165),n=s(48),c=s(46),r=s(470),i=s(459),l=s(460),o=s(458),u=s(481),j=s(103),d=s(0),b=s.n(d),O=s(471),h=s.n(O),m=s(69),g=s(479),v=s.n(g),x=s(1),f=b.a.memo((function(e){var t,s;Object(r.a)(e);var u=Object(d.useRef)(null),b=Object(d.useRef)(null),m=Object(d.useRef)(null),g=Object(d.useState)([]),f=Object(c.a)(g,2),y=f[0],N=f[1],S=y.map((function(e){return Object(x.jsx)(p,{name:e.userName,photo:e.photo,massage:e.message},e.userId)})),R=Object(d.useState)("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"),w=Object(c.a)(R,2),I=w[0],C=w[1],T=h()(I,{onOpen:function(){C("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx")},onClose:function(){var e;null===(e=P())||void 0===e||e.close()},shouldReconnect:function(){return!0},retryOnError:!0,reconnectAttempts:100,reconnectInterval:3e3}),E=T.sendMessage,_=(T.sendJsonMessage,T.lastMessage),k=T.lastJsonMessage,M=T.readyState,P=T.getWebSocket;null===(t=m.current)||void 0===t||t.addEventListener("scroll",(function(){var e;null!==b.current&&(b.current.style.visibility="visible"),null===(e=b.current)||void 0===e||e.addEventListener("click",(function(){var e;null===(e=u.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}),setTimeout((function(){null!==b.current&&(b.current.style.visibility="hidden")}),1e3)}))})),Object(d.useEffect)((function(){null!==k&&N((function(e){return[].concat(Object(n.a)(e),Object(n.a)(k))}))}),[_,N]);s={},Object(a.a)(s,O.ReadyState.CONNECTING,"Connecting"),Object(a.a)(s,O.ReadyState.OPEN,"Open"),Object(a.a)(s,O.ReadyState.CLOSING,"Closing"),Object(a.a)(s,O.ReadyState.CLOSED,"Closed"),Object(a.a)(s,O.ReadyState.UNINSTANTIATED,"Uninstantiated");return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(i.a,{children:[Object(x.jsxs)(l.a,{span:24,children:[Object(x.jsxs)("div",{style:{height:"400px",overflowY:"auto"},ref:m,children:[S,Object(x.jsx)("div",{style:{visibility:"hidden"},ref:u})]}),Object(x.jsx)("div",{className:v.a.scrollBtn,children:Object(x.jsx)(o.a,{ref:b,children:"To New Massages"})})]}),Object(x.jsx)(l.a,{span:12,children:Object(x.jsx)("div",{children:Object(x.jsx)(j.c,{enableReinitialize:!0,initialValues:{massageText:""},onSubmit:function(e){E(e.massageText),setTimeout((function(){var e;null===(e=u.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),100)},children:function(){return Object(x.jsx)(j.b,{children:Object(x.jsxs)(i.a,{children:[Object(x.jsx)(j.a,{type:"textarea",name:"massageText",placeholder:"Write your massage",className:v.a.massageInput}),Object(x.jsx)("button",{type:"submit",disabled:M!==O.ReadyState.OPEN,children:"Send Massage"})]})})}})})})]})})}));t.default=f;var p=function(e){var t=e.name,s=e.photo,a=e.massage;return Object(x.jsxs)("div",{children:[s?Object(x.jsx)("img",{src:s,alt:"",className:v.a.massagePhoto}):Object(x.jsx)("img",{src:m.a,alt:"",className:v.a.massagePhoto}),Object(x.jsx)("span",{children:t}),Object(x.jsx)("div",{children:a}),Object(x.jsx)(u.a,{})]})}}}]);
//# sourceMappingURL=4.89125d05.chunk.js.map